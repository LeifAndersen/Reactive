(this.webpackJsonpreactive=this.webpackJsonpreactive||[]).push([[0],{13:function(e,t,r){},20:function(e,t,r){},27:function(e,t,r){"use strict";r.r(t);var n=r(4),a=r.n(n),i=r(14),s=r.n(i),c=(r(20),r(7)),o=r(9),d=r(8),l=r(15),u=(r(13),r(12)),g=r(5),b=r(2),p=r(3),m=r(0),y=function(e){Object(o.a)(r,e);var t=Object(d.a)(r);function r(e){var n;return Object(c.a)(this,r),(n=t.call(this,e)).warnings={delete_grabber:Object(m.jsx)("div",{children:"Please click on the grabber (either start or end) to delete it"})},n.reader=new FileReader,n.componentDidMount=function(){var e=Object(g.a)(n);n.playVideo.current.addEventListener("timeupdate",(function(){var t=e.state.currently_grabbed.index,r=(e.playVideo.current.currentTime-e.state.timings[t].start)/e.playVideo.current.duration*100;e.progressBar.current.style.width="".concat(r,"%"),e.playVideo.current.currentTime>=e.state.timings[e.state.timings.length-1].end?(e.playVideo.current.pause(),e.setState({playing:!1})):e.playVideo.current.currentTime>=e.state.timings[t].end&&t+1<e.state.timings.length&&e.setState({currently_grabbed:{index:t+1,type:"start"}},(function(){e.progressBar.current.style.width="0%",e.progressBar.current.style.left="".concat(e.state.timings[t+1].start/e.playVideo.current.duration*100,"%"),e.playVideo.current.currentTime=e.state.timings[t+1].start}))})),window.addEventListener("keyup",(function(t){" "===t.key&&e.play_pause()}));var t=n.state.timings;n.playVideo.current.onloadedmetadata=function(){t.push({start:0,end:n.playVideo.current.duration}),n.setState({timings:t},(function(){n.addActiveSegments()}))}},n.reset=function(){n.playVideo.current.pause(),n.setState({isMuted:!1,timings:[{start:0,end:n.playVideo.current.duration}],playing:!1,currently_grabbed:{index:0,type:"none"},difference:.2,deletingGrabber:!1,current_warning:null,imageUrl:""},(function(){n.playVideo.current.currentTime=n.state.timings[0].start,n.progressBar.current.style.left="".concat(n.state.timings[0].start/n.playVideo.current.duration*100,"%"),n.progressBar.current.style.width="0%",n.addActiveSegments()}))},n.captureSnapshot=function(){var e=n.playVideo.current,t=document.createElement("canvas");t.width=e.videoWidth,t.height=e.videoHeight,t.getContext("2d").drawImage(e,0,0,t.width,t.height);var r=t.toDataURL();n.setState({imageUrl:r})},n.downloadSnapshot=function(){var e=document.createElement("a");e.href=n.state.imageUrl,e.download="Thumbnail.png",e.click()},n.skipPrevious=function(){n.state.playing&&n.playVideo.current.pause();var e=0!=n.state.currently_grabbed.index?n.state.currently_grabbed.index-1:n.state.timings.length-1;n.setState({currently_grabbed:{index:e,type:"start"},playing:!1},(function(){n.progressBar.current.style.left="".concat(n.state.timings[e].start/n.playVideo.current.duration*100,"%"),n.progressBar.current.style.width="0%",n.playVideo.current.currentTime=n.state.timings[e].start}))},n.play_pause=function(){var e=Object(g.a)(n);n.state.playing?n.playVideo.current.pause():(e.playVideo.current.currentTime>=e.state.timings[e.state.timings.length-1].end&&(e.playVideo.current.pause(),e.setState({playing:!1,currently_grabbed:{index:0,type:"start"}},(function(){e.playVideo.current.currentTime=e.state.timings[0].start,e.progressBar.current.style.left="".concat(e.state.timings[0].start/e.playVideo.current.duration*100,"%"),e.progressBar.current.style.width="0%"}))),n.playVideo.current.play()),n.setState({playing:!n.state.playing})},n.skipNext=function(){n.state.playing&&n.playVideo.current.pause();var e=n.state.currently_grabbed.index!=n.state.timings.length-1?n.state.currently_grabbed.index+1:0;n.setState({currently_grabbed:{index:e,type:"start"},playing:!1},(function(){n.progressBar.current.style.left="".concat(n.state.timings[e].start/n.playVideo.current.duration*100,"%"),n.progressBar.current.style.width="0%",n.playVideo.current.currentTime=n.state.timings[e].start}))},n.updateProgress=function(e){var t=n.playBackBar.current.getBoundingClientRect(),r=(e.clientX-t.left)/t.width*n.playVideo.current.duration;n.playVideo.current.pause();var a,i=-1,s=0,c=Object(u.a)(n.state.timings);try{for(c.s();!(a=c.n()).done;){var o=a.value;r>=o.start&&r<=o.end&&(i=s),s+=1}}catch(d){c.e(d)}finally{c.f()}-1!=i&&n.setState({playing:!1,currently_grabbed:{index:i,type:"start"}},(function(){n.progressBar.current.style.width="0%",n.progressBar.current.style.left="".concat(n.state.timings[i].start/n.playVideo.current.duration*100,"%"),n.playVideo.current.currentTime=r}))},n.startGrabberMove=function(e){n.playVideo.current.pause();var t=n.playBackBar.current.getBoundingClientRect(),r=(e.clientX-t.left)/t.width,a=n.state.currently_grabbed.index,i=n.state.currently_grabbed.type;window.addEventListener("mouseup",(function(){window.removeEventListener("mousemove",n.startGrabberMove),n.addActiveSegments()}));var s=n.state.timings,c=n.playVideo.current.duration*r;"start"==i&&c>(0!=a?s[a-1].end+n.state.difference+.2:0)&&c<s[a].end-n.state.difference?(n.progressBar.current.style.left="".concat(100*r,"%"),n.playVideo.current.currentTime=c,s[a].start=c,n.setState({timings:s,playing:!1})):"end"==i&&c>s[a].start+n.state.difference&&c<(a!=n.state.timings.length-1?s[a+1].start-n.state.difference-.2:n.playVideo.current.duration)&&(n.progressBar.current.style.left="".concat(s[a].start/n.playVideo.current.duration*100,"%"),n.playVideo.current.currentTime=s[a].start,s[a].end=c,n.setState({timings:s,playing:!1})),n.progressBar.current.style.width="0%"},n.renderGrabbers=function(){return n.state.timings.map((function(e,t){return Object(m.jsxs)("div",{children:[Object(m.jsx)("div",{className:"grabber start",style:{left:"".concat(e.start/n.playVideo.current.duration*100,"%")},onMouseDown:function(e){n.state.deletingGrabber?n.deleteGrabber(t):n.setState({currently_grabbed:{index:t,type:"start"}},(function(){window.addEventListener("mousemove",n.startGrabberMove)}))},children:Object(m.jsx)("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",x:"0",y:"0",width:"10",height:"14",viewBox:"0 0 10 14",xmlSpace:"preserve",children:Object(m.jsx)("path",{className:"st0",d:"M1 14L1 14c-0.6 0-1-0.4-1-1V1c0-0.6 0.4-1 1-1h0c0.6 0 1 0.4 1 1v12C2 13.6 1.6 14 1 14zM5 14L5 14c-0.6 0-1-0.4-1-1V1c0-0.6 0.4-1 1-1h0c0.6 0 1 0.4 1 1v12C6 13.6 5.6 14 5 14zM9 14L9 14c-0.6 0-1-0.4-1-1V1c0-0.6 0.4-1 1-1h0c0.6 0 1 0.4 1 1v12C10 13.6 9.6 14 9 14z"})})}),Object(m.jsx)("div",{className:"grabber end",style:{left:"".concat(e.end/n.playVideo.current.duration*100,"%")},onMouseDown:function(e){n.state.deletingGrabber?n.deleteGrabber(t):n.setState({currently_grabbed:{index:t,type:"end"}},(function(){window.addEventListener("mousemove",n.startGrabberMove)}))},children:Object(m.jsx)("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",x:"0",y:"0",width:"10",height:"14",viewBox:"0 0 10 14",xmlSpace:"preserve",children:Object(m.jsx)("path",{className:"st0",d:"M1 14L1 14c-0.6 0-1-0.4-1-1V1c0-0.6 0.4-1 1-1h0c0.6 0 1 0.4 1 1v12C2 13.6 1.6 14 1 14zM5 14L5 14c-0.6 0-1-0.4-1-1V1c0-0.6 0.4-1 1-1h0c0.6 0 1 0.4 1 1v12C6 13.6 5.6 14 5 14zM9 14L9 14c-0.6 0-1-0.4-1-1V1c0-0.6 0.4-1 1-1h0c0.6 0 1 0.4 1 1v12C10 13.6 9.6 14 9 14z"})})})]},"grabber_"+t)}))},n.addGrabber=function(){var e=n.state.timings,t=e[e.length-1].end+n.state.difference;n.setState({deletingGrabber:!1,current_warning:null}),t>=n.playVideo.current.duration||(e.push({start:t+.2,end:n.playVideo.current.duration}),n.setState({timings:e},(function(){n.addActiveSegments()})))},n.preDeleteGrabber=function(){n.state.deletingGrabber?n.setState({deletingGrabber:!1,current_warning:null}):n.setState({deletingGrabber:!0,current_warning:"delete_grabber"})},n.deleteGrabber=function(e){var t=n.state.timings;n.setState({timings:t,deletingGrabber:!1,current_warning:null,currently_grabbed:{index:0,type:"start"}}),1!=t.length&&(t.splice(e,1),n.progressBar.current.style.left="".concat(t[0].start/n.playVideo.current.duration*100,"%"),n.playVideo.current.currentTime=t[0].start,n.progressBar.current.style.width="0%",n.addActiveSegments())},n.addActiveSegments=function(){var e="",t=0;e+=", rgb(240, 240, 240) 0%, rgb(240, 240, 240) ".concat(n.state.timings[0].start/n.playVideo.current.duration*100,"%");var r,a=Object(u.a)(n.state.timings);try{for(a.s();!(r=a.n()).done;){var i=r.value;t>0&&(e+=", rgb(240, 240, 240) ".concat(n.state.timings[t-1].end/n.playVideo.current.duration*100,"%, rgb(240, 240, 240) ").concat(i.start/n.playVideo.current.duration*100,"%")),e+=", #ccc ".concat(i.start/n.playVideo.current.duration*100,"%, #ccc ").concat(i.end/n.playVideo.current.duration*100,"%"),t+=1}}catch(s){a.e(s)}finally{a.f()}e+=", rgb(240, 240, 240) ".concat(n.state.timings[t-1].end/n.playVideo.current.duration*100,"%, rgb(240, 240, 240) 100%"),n.playBackBar.current.style.background="linear-gradient(to right".concat(e,")")},n.saveVideo=function(){var e={trim_times:n.state.timings,mute:n.state.isMuted};n.props.saveVideo(e)},n.render=function(){return Object(m.jsxs)("div",{className:"wrapper",children:[Object(m.jsx)("video",{className:"video",autoload:"metadata",muted:n.state.isMuted,ref:n.playVideo,onClick:n.play_pause.bind(Object(g.a)(n)),children:Object(m.jsx)("source",{src:n.props.videoUrl,type:"video/mp4"})}),Object(m.jsxs)("div",{className:"playback",children:[n.renderGrabbers(),Object(m.jsx)("div",{className:"seekable",ref:n.playBackBar,onClick:n.updateProgress}),Object(m.jsx)("div",{className:"progress",ref:n.progressBar})]}),Object(m.jsxs)("div",{className:"controls",children:[Object(m.jsxs)("div",{className:"player-controls",children:[Object(m.jsx)("button",{className:"settings-control",title:"Reset Video",onClick:n.reset,children:Object(m.jsx)(b.a,{icon:p.k})}),Object(m.jsx)("button",{className:"settings-control",title:"Mute/Unmute Video",onClick:function(){return n.setState({isMuted:!n.state.isMuted})},children:n.state.isMuted?Object(m.jsx)(b.a,{icon:p.l}):Object(m.jsx)(b.a,{icon:p.m})}),Object(m.jsx)("button",{className:"settings-control",title:"Capture Thumbnail",onClick:n.captureSnapshot,children:Object(m.jsx)(b.a,{icon:p.a})})]}),Object(m.jsxs)("div",{className:"player-controls",children:[Object(m.jsx)("button",{className:"seek-start",title:"Skip to previous clip",onClick:n.skipPrevious,children:Object(m.jsx)(b.a,{icon:p.i})}),Object(m.jsx)("button",{className:"play-control",title:"Play/Pause",onClick:n.play_pause.bind(Object(g.a)(n)),children:n.state.playing?Object(m.jsx)(b.a,{icon:p.g}):Object(m.jsx)(b.a,{icon:p.h})}),Object(m.jsx)("button",{className:"seek-end",title:"Skip to next clip",onClick:n.skipNext,children:Object(m.jsx)(b.a,{icon:p.j})})]}),Object(m.jsxs)("div",{children:[Object(m.jsxs)("button",{title:"Add grabber",className:"trim-control margined",onClick:n.addGrabber,children:["Add ",Object(m.jsx)(b.a,{icon:p.d})]}),Object(m.jsxs)("button",{title:"Delete grabber",className:"trim-control margined",onClick:n.preDeleteGrabber,children:["Delete ",Object(m.jsx)(b.a,{icon:p.d})]}),Object(m.jsx)("button",{title:"Save changes",className:"trim-control",onClick:n.saveVideo,children:"Save"})]})]}),null!=n.state.current_warning?Object(m.jsx)("div",{className:"warning",children:n.warnings[n.state.current_warning]}):"",""!=n.state.imageUrl?Object(m.jsxs)("div",{className:"marginVertical",children:[Object(m.jsx)("img",{src:n.state.imageUrl,className:"thumbnail"}),Object(m.jsx)("div",{className:"controls",children:Object(m.jsxs)("div",{className:"player-controls",children:[Object(m.jsx)("button",{className:"settings-control",title:"Reset Video",onClick:n.downloadSnapshot,children:Object(m.jsx)(b.a,{icon:p.b})}),Object(m.jsx)("button",{className:"settings-control",title:"Save Video",onClick:function(){n.setState({imageUrl:""})},children:Object(m.jsx)(b.a,{icon:p.c})})]})})]}):""]})},n.state={isMuted:!1,timings:[],playing:!1,currently_grabbed:{index:0,type:"none"},difference:.2,deletingGrabber:!1,current_warning:null,imageUrl:""},n.playVideo=a.a.createRef(),n.progressBar=a.a.createRef(),n.playBackBar=a.a.createRef(),n}return r}(a.a.Component),j=function(e){Object(o.a)(r,e);var t=Object(d.a)(r);function r(e){var n;return Object(c.a)(this,r),(n=t.call(this,e)).componentDidMount=function(){n.toggleThemes(),document.addEventListener("drop",(function(e){e.preventDefault(),e.stopPropagation()}))},n.render_uploader=function(){return Object(m.jsxs)("div",{className:"wrapper",children:[Object(m.jsx)("input",{onChange:function(e){return n.upload_file(e.target.files)},type:"file",className:"hidden",id:"up_file"}),Object(m.jsx)(l.FileDrop,{onDrop:function(e){return n.upload_file(e)},onTargetClick:function(){return document.getElementById("up_file").click()},children:"Click or drop your video here to edit!"})]})},n.render_editor=function(){return Object(m.jsx)(y,{videoUrl:n.state.videoUrl})},n.toggleThemes=function(){n.state.isDarkMode?(document.body.style.backgroundColor="#1f242a",document.body.style.color="#fff"):(document.body.style.backgroundColor="#fff",document.body.style.color="#1f242a"),n.setState({isDarkMode:!n.state.isDarkMode})},n.upload_file=function(e){var t=window.URL.createObjectURL(e[0]);e.name;n.setState({isUpload:!1,videoUrl:t})},n.render=function(){return Object(m.jsxs)("div",{children:[n.state.isUpload?n.render_uploader():n.render_editor(),Object(m.jsx)("div",{className:"theme_toggler",onClick:n.toggleThemes,children:n.state.isDarkMode?Object(m.jsx)("i",{className:"toggle","aria-hidden":"true",children:Object(m.jsx)(b.a,{icon:p.e})}):Object(m.jsx)("i",{className:"toggle",children:Object(m.jsx)(b.a,{icon:p.f})})})]})},n.state={isUpload:!0,videoUrl:"",isDarkMode:!1},n}return r}(a.a.Component);var f=function(){return Object(m.jsx)("div",{className:"App",children:Object(m.jsx)(j,{})})},h=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,28)).then((function(t){var r=t.getCLS,n=t.getFID,a=t.getFCP,i=t.getLCP,s=t.getTTFB;r(e),n(e),a(e),i(e),s(e)}))};s.a.render(Object(m.jsx)(a.a.StrictMode,{children:Object(m.jsx)(f,{})}),document.getElementById("root")),h()}},[[27,1,2]]]);
//# sourceMappingURL=main.acc40bd1.chunk.js.map